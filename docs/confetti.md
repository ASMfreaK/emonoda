### Настройка оповещений ###
При обновлении торрентов **emupdate** умеет посылать оповещения. Для включения этой возможности вам нужно [настроить](config) соответствующие плагины в секции `confetti`. Ниже приведен пример для уведомлений по почте (через [внешний почтовый сервер](https://yandex.ru/support/mail/mail-clients.xml)), а также через [Pushover](https://pushover.net/):
```yaml
confetti:
    email:
        to: yarr@example.com
        server: smtp.yandex.ru
        ssl: true
        user: emonodaserver
        passwd: secretword
        sender: emonodaserver@yandex.ru

```

***

### Почта ###
Включается плагином `email`. По умолчанию плагин настроен на отправку почты через локальный SMTP-релей без SSL на `root@localhost`. Другие параметры со значениями по умолчанию перечислены ниже:

* **`confetti/email/subject='{source} report: you have {affected} new torrents ^_^'`**
    * Тема письма. В фигурных скобках указываются подставляемые параметры: `source` обозначает источник данных (сейчас это всегда `emupdate`), а `affected` показывает количество обновленных торрентов.
* **`confetti/email/to=[root@localhost]`**
    * Адрес получателя (один или список) в `To`.
* **`confetti/email/cc=[]`**
    * Кому отправить копию письма в `CC`.
* **`confetti/email/html=true`**
    * Выбор вида письма. По умолчанию оно форматируется в HTML, иначе отправится в виде плейнтекста.
* **`confetti/email/sender=root@localhost`**
    * Отправитель для поля `From`.
* **`confetti/email/server=localhost`**
    * Адрес SMTP-сервера.
* **`confetti/email/port=0`**
    * Порт подключения серверу. Значение по умолчанию определяется автоматически в зависимости от параметра `confetti/email/ssl`. Используется `25` порт для незащищенного соединения и `465` для SSL.
* **`confetti/email/ssl=false`**
    * Использовать ли SSL для SMTP. Так же влияет на номер порта по умолчанию.
* **`confetti/email/user=""`**
    * Имя пользователя для авторизации на сервере.
* **`confetti/email/passwd=""`**
    * Пароль для авторизации на сервере.
* **`confetti/email/timeout=10.0`**
    * Сетевой таймаут в секундах.
* **`confetti/email/retries=5`**
    * Количество попыток повторной отправки емейлов в случае ошибки сети или сервера.
* **`confetti/email/retries_sleep=1.0`**
    * Пауза в секундах между попытками отправки емейлов.


***

### Push-нотификации на iPhone/Android через Pushover ###
Включаются плагином `pushover`. Для отправки уведомлений используется [одноименный сервис](https://pushover.net/). Вам нужно установить на телефон или планшет специальное приложение ([iPhone](https://itunes.apple.com/ru/app/pushover-notifications/id506088175), [Android](https://play.google.com/store/apps/details?id=net.superblock.pushover)), зарегистрировать Emonoda (по терминологии пушовера "приложение") [тут](https://pushover.net/apps/build), получить ключ для него и для юзера (на главной странице). По этим ключам отправляются уведомления на ваше устройство.
Плагину требуется указать как минимум один ключ.

* **`confetti/pushover/api_key=CHANGE_ME`**
    * Ключ приложения.
* **`confetti/pushover/user_key=CHANGE_ME`**
    * Ключ пользователя.
* **`confetti/pushover/devices=[]`**
    * Список устройств пользователя, на которые нужно отправить оповещение. Пустой список - все устройства.
* **`confetti/pushover/proxy_url=""`**
    Прокси до сервиса. Поддерживаются HTTP(S)-прокси и SOCKS4/5. Этот параметр можно использовать так: `trackers/rutracker.org/proxy_url=socks5://localhost:5000` (вместе с [SOCKS-проксированием по SSH](https://ru.wikibooks.org/wiki/SSH_%D1%82%D1%83%D0%BD%D0%BD%D0%B5%D0%BB%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5)). Формат - `scheme://username:passwd@host:port`. Вместо `scheme` нужно указать `socks4`, `socks5`, `http` или `https`.
* **`confetti/pushover/timeout=10.0`**
    * Сетевой таймаут в секундах.
* **`confetti/pushover/retries=5`**
    * Количество попыток повторной отправки оповещений в случае ошибки сети или сервера.
* **`confetti/pushover/retries_sleep=1.0`**
    * Пауза в секундах между попытками отправки оповещений.


***

### Лента Atom для использования на сервере ###
Для полноценного использования этой опции необходимо, чтобы на компьютере, с которого запускается emonoda был запущен любой веб-сервер. Подойдёт, например, встроенный в Python простейший сервер:
```bash
python -m http.server
```
Для более полноценной работы рекомендуется использовать полноценный сервер (nginx, lighttpd и т.д.). Его необходимо настроить так, чтобы он отдавал файл с лентой по адресу, который вы указываете в параметре `confetti/atom/url`. По умолчанию плагин хранит максимум 20 последних обновлений, на основе которых создаётся файл ленты. После создания файла ленты плагин назначит ему права 664, чтобы иметь дальнейшую возможность редактирования файла.

* **`history_path`**
    * Имя файла с полным путём до файла, в котором хранится история обновлений.
* **`path`**
    * Путь до места хранения ленты.
* **`url`**
    * Полная ссылка на файл ленты в соответствии со ссылкой, по которой она будет доступна с сервера.
* **`user`**
    * Пользователь, во владение которого плагин передаст ленту.
* **`group`**
    * Группа пользователей, во владение которой плагин передаст ленту. Если пользователь, от имени которого запущена emonoda не состоит в этой группе, то плагин выдаст ошибку.
* **`template`**
    * Шаблон для форматирования ленты. Если не указан, то используется встроенный.
* **`html`**
    * Выбор вида заготовки для электнов ленты. По умолчанию они форматируется в HTML, иначе - в виде плейнтекста.
